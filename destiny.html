<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IoT Home Security monitoring system</title>
  <style>
    :root{
      --card-bg: #ffffff;
      --page-bg: #f3f6fb;
      --accent: #5061f5;
      --muted: #6b8077;
      --radius: 12px;
      --shadow: 0 6px 18px rgba(16,24,40,0.08);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--page-bg);color:#0f172a;padding:32px}
    button{
      border:0;padding:10px 18px;border-radius:10px;
      background:var(--accent);color:white;font-weight:600;
      cursor:pointer;transition:all .2s ease;
    }
uu    button:hover{background:#3243d6}
    section{display:none}
    section.active{display:block}
    .container{max-width:980px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
    .profile-card{background:var(--card-bg);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;display:flex;gap:16px;align-items:center;}
    .avatar{width:96px;height:96px;border-radius:14px;overflow:hidden}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .info{flex:1}
    .materials-list{max-width:700px;margin:0 auto;text-align:left}
    .materials-list h3{margin-top:20px}
    .materials-list ul{background:#fff;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow)}
    .materials-list ul li{margin:6px 0}
    .sensors{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-top:20px}
    .sensor-card{background:#fff;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow)}
    .sensor-status.ok{color:green;font-weight:600}
    .sensor-status.alert{color:red;font-weight:600}
    .code-block{
      background:#1e1e1e;color:#d4d4d4;padding:16px;border-radius:12px;
      font-family: monospace;overflow-x:auto;white-space:pre;
      box-shadow:var(--shadow);margin-top:20px;
    }
  </style>
</head>
<body>

  <!-- PROFILES -->
  <section id="profiles" class="active">
    <h1 style="text-align:center">PROFILES</h1>
    <div class="container">
      <article class="profile-card">
        <figure class="avatar"><img src="WhatsApp Image 2025-09-29 at 10.50.26.jpeg" alt="Ruth"></figure>
        <div class="info">
          <h2>Ruth NIYOGUSHIMWA</h2>
          <p>IoT System Engineer ‚Äî Builds home security systems with automation and surveillance.</p>
          <button onclick="alert('Contact Ruth üìû 0798623223')">Contact</button>
        </div>
      </article>

      <article class="profile-card">
        <figure class="avatar"><img src="download.jpg" alt="Samuel"></figure>
        <div class="info">
          <h2>IRUMVA Samuel</h2>
          <p>IoT Engineer ‚Äî Designs and debugs firmware for embedded devices and sensors.</p>
          <button onclick="alert('Contact Samuel üìû 0798456789')">Contact</button>
        </div>
      </article>
    </div>
    <div style="text-align:center;margin-top:30px">
      <button onclick="goTo('materials')">Next ‚û° Components & Description</button>
    </div>
  </section>

  <!-- MATERIALS & DESCRIPTION -->
  <section id="materials">
    <h1 style="text-align:center">Project Components & Description</h1>
    <div class="materials-list">
      <h3>üìñ Project Description</h3>
      <p>
        The Home Security Monitoring System is an <b>IoT-based solution</b> providing continuous <b>real-time monitoring</b> of home environments. 
        Its main goal is to detect threats like unauthorized access, fire, smoke, gas leaks, and abnormal electrical currents. 
        Through <b>data acquisition</b> from sensors, the ESP32 processes and visualizes data on a digital dashboard, ensuring early alerts and safety.
      </p>
      <p>
        The system uses <b>IoT principles</b> with ESP32 as the edge device collecting data from PIR motion sensors, smoke and gas sensors, 
        flame detectors, door/window sensors, and a current sensor. Each component functions as a <b>data node</b>, sending status updates 
        for analysis. The camera module enables <b>remote surveillance</b>. Breadboards, jumper wires, and a 5V DC supply ensure connectivity 
        and stable operation.
      </p>
      <p>
        Societal benefits include improved home security, prevention of theft, and detection of health hazards. 
        The <b>IoT dashboard</b> allows users to respond in real-time, applying <b>automation</b> and <b>remote monitoring</b> to create 
        safer and smarter living environments.
      </p>

      <h3>üîß Components Used</h3>
      <ul>
        <li>ESP32 (Microcontroller)</li>
        <li>PIR Motion Sensor</li>
        <li>Smoke Sensor (MQ-2)</li>
        <li>Gas Sensor</li>
        <li>Flame / Fire Detector</li>
        <li>Door & Window Magnetic Sensors</li>
        <li>Current Sensor</li>
        <li>Camera Module</li>
        <li>Breadboard & Jumper wires</li>
        <li>Power Supply (5V DC)</li>
      </ul>

      <h3>üíª ESP32 Controller Code</h3>
      
      <div class="code-block" id="espCode">
<pre>

#include <Adafruit_MQTT.h>
  #include <Adafruit_MQTT_Client.h>
  #include <WiFi.h>
  
  #define WIFI_SSID "row"
  #define WIFI_PASS "1234567890"
  #define AIO_SERVER "io.adafruit.com"
  #define AIO_SERVERPORT 1883
  #define AIO_USERNAME "fillette12"
    
  #define PIR_PIN     15
  #define SMOKE_PIN   19   
  #define DOOR_PIN    33
  #define BUZZER_PIN  26
  #define LED1_PIN    5
  #define LED2_PIN    27
  
  #define FLAME_THRESHOLD  600
  
  WiFiClient client;
  Adafruit_MQTT_Client mqtt(&client, AIO_SERVER, AIO_SERVERPORT, AIO_USERNAME, AIO_KEY);
  Adafruit_MQTT_Publish feedPir = Adafruit_MQTT_Publish(&mqtt, AIO_USERNAME "/feeds/feedPir");
  Adafruit_MQTT_Publish feedSmoke = Adafruit_MQTT_Publish(&mqtt, AIO_USERNAME "/feeds/feedSmoke");
  Adafruit_MQTT_Publish feeddoor = Adafruit_MQTT_Publish(&mqtt, AIO_USERNAME "/feeds/feeddoor");
  
  bool prevMotion = LOW;
  bool prevSmoke = HIGH;
  bool prevDoor = HIGH;
  
  void setup() {
    Serial.begin(115200);
    pinMode(PIR_PIN, INPUT);
    pinMode(SMOKE_PIN, INPUT);
    pinMode(DOOR_PIN, INPUT);
    pinMode(LED1_PIN, OUTPUT);
    pinMode(LED2_PIN, OUTPUT);
    pinMode(BUZZER_PIN, OUTPUT);
    
    digitalWrite(LED1_PIN, LOW);
    digitalWrite(LED2_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);
    Serial.println(F("Connecting to WiFi..."));
    WiFi.begin(WIFI_SSID, WIFI_PASS);
    while (WiFi.status() != WL_CONNECTED) {
      delay(1000);
      Serial.print(".");
    }
    Serial.println("\nWiFi connected!");
    
   
    MQTT_connect();
    
    // Read initial sensor states
    prevMotion = digitalRead(PIR_PIN);
    prevSmoke = digitalRead(SMOKE_PIN);
    prevDoor = digitalRead(DOOR_PIN);
    
    
      feedPir.publish("MOTION ON");
    if (prevMotion == HIGH) {
    } else {
      feedPir.publish("MOTION OFF");
    }
    if (prevSmoke == LOW) {
      feedSmoke.publish("SMOKE ON");
    } else {
      feedSmoke.publish("SMOKE OFF");
    }
    if (prevDoor == LOW) {
      feeddoor.publish("DOOR ON");
    } else {
      feeddoor.publish("DOOR OFF");
    }
  }
  
  void loop() {
    MQTT_connect();
  
    int motion = digitalRead(PIR_PIN);
    int smoke  = digitalRead(SMOKE_PIN);
    int doorstatus = digitalRead(DOOR_PIN);
  
    // Handle PIR motion
    if (motion != prevMotion) {
      if (motion == HIGH) {
        Serial.println("Motion Detected!");
        digitalWrite(LED1_PIN, HIGH);
        feedPir.publish("MOTION DETECTED");
      } else {
        Serial.println("No Motion");
        digitalWrite(LED1_PIN, LOW);
        feedPir.publish("NO MOTION DETECTED");
      }
      prevMotion = motion;
    }
  
    // Handle smoke sensor
    if (smoke != prevSmoke) {
      if (smoke == LOW) {   
        Serial.println("Smoke Detected!");
        digitalWrite(BUZZER_PIN, HIGH);
        feedSmoke.publish("SMOKE DETECTED");
      } else {
        Serial.println("No Smoke");
        digitalWrite(BUZZER_PIN, LOW);
        feedSmoke.publish("NO SMOKE DETECTED");
      }
      prevSmoke = smoke;
    }
  
    // Handle door sensor
    if (doorstatus != prevDoor) {
      if (doorstatus == LOW) {
        Serial.println("door opened");
        digitalWrite(LED2_PIN, HIGH);
        feeddoor.publish("DOOR OPENED");
      } else {
        Serial.println("door closed");
        digitalWrite(LED2_PIN, LOW);
        feeddoor.publish("DOOR CLOSED");
      }
      prevDoor = doorstatus;
    }
    
    delay(1000);
  }
  
  void MQTT_connect() {
    int8_t ret;
  
    if (mqtt.connected()) {
      return;
    }
    Serial.print("Connecting to MQTT... ");
  
    uint8_t retries = 3;
    while ((ret = mqtt.connect()) != 0) { 
      Serial.println(mqtt.connectErrorString(ret));
      Serial.println("Retrying MQTT connection in 5 seconds...");
      mqtt.disconnect();
      delay(5000); 
      retries--;
      if (retries == 0) {
        while (1);
      }
    }
    Serial.println("MQTT Connected!");
  }

<button onclick="copyCode()">Copy Code</button>
</pre>
      </div>

      <h3>üìù Project Summary</h3>
      <p>
        IoT-driven system integrating multiple sensors to detect motion, fire, smoke, gas leaks, and unauthorized access. 
        Real-time monitoring with a dashboard ensures safety and reliability for homes.
      </p>
    </div>
    <div style="text-align:center;margin-top:30px">
      <button onclick="goTo('profiles')">‚¨Ö Back to Profiles</button>
      <button onclick="goTo('dashboard')">Next ‚û° Dashboard</button>
    </div>
  </section>

  <!-- DASHBOARD -->
  <section id="dashboard">
    <h1 style="text-align:center">Home Security Monitoring Dashboard</h1>
    <div class="sensors">
      <div class="sensor-card"><h3>PIR Motion Sensor</h3><p>Status: <span class="sensor-status ok">Idle</span></p></div>
      <div class="sensor-card"><h3>Smoke Sensor</h3><p>Status: <span class="sensor-status ok">Clear</span></p></div>
      <div class="sensor-card"><h3>Door & Window Sensor</h3><p>Status: <span class="sensor-status ok">Closed</span></p></div>
      <div class="sensor-card"><h3>Fire Detector</h3><p>Status: <span class="sensor-status ok">Safe</span></p></div>
      <div class="sensor-card"><h3>Gas Sensor</h3><p>Status: <span class="sensor-status ok">No Leak</span></p></div>
      <div class="sensor-card"><h3>Current Sensor</h3><p>Status: <span class="sensor-status ok">Normal</span></p></div>
      <div class="sensor-card"><h3>Camera</h3><p>Status: <span class="sensor-status ok">Active</span></p></div>
    </div>
    <div style="text-align:center;margin-top:30px">
      <button onclick="goTo('materials')">‚¨Ö Back to Components</button>
      <button onclick="goTo('profiles')">‚¨Ö Back to Profiles</button>
    </div>
  </section>

  <script>
    function goTo(pageId){
      document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      window.scrollTo(0,0); // scroll to top when navigating
    }

    function copyCode(){
      const codeText = document.getElementById("espCode").innerText;
      const temp = document.createElement("textarea");
      document.body.appendChild(temp);
      temp.value = codeText;
      temp.select();
      document.execCommand("copy");
      document.body.removeChild(temp);
      alert("ESP32 code copied to clipboard!");
    }
  </script>

</body>
</html>
